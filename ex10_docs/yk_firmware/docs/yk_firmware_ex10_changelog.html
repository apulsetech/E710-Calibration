
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Changelog for 2.00.00 &#8212; Impinj Reader Chip SDK</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinxdoc.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="search" title="Search" href="../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="index.html">Impinj Reader Chip SDK</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Changelog for 2.00.00</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="changelog-for-version">
<span id="changelog-release-active-label"></span><h1>Changelog for 2.00.00<a class="headerlink" href="#changelog-for-version" title="Permalink to this headline">¶</a></h1>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Changed file(s)</p></th>
<th class="head"><p>API change description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>All</p></td>
<td><p>This release of the SDK has some major architectural upgrades,
allowing a more tailored and optimized developer experience.
Existing SDK sources were refactored and reorganized for better modularity.
As part of this work, some functions moved to other modules.</p>
<p>For example <code class="docutils literal notranslate"><span class="pre">get_default_lbt_rx_analog_configs()</span></code> has moved from <code class="docutils literal notranslate"><span class="pre">ex10_ops.h</span></code>
and now resides <code class="docutils literal notranslate"><span class="pre">include/ex10_modules/ex10_listen_before_talk.h</span></code>.</p>
<p>See <a class="reference internal" href="yk_firmware_ex10_overview.html#ex10-api-host-sdk-overview"><span class="std std-ref">Impinj Reader Chip SDK Overview</span></a> for additional details on the updated SDK structure.</p>
</td>
</tr>
<tr class="row-odd"><td><p>include/e10_api/board_init.h</p></td>
<td><p>Remove <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">Ex10Interfaces</span></code> from the C SDK</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Ex10Interfaces</span></code> structure was redundant because it only contains
the pointers to the module function pointer structures that can be
retrieved from the global name space by using the <code class="docutils literal notranslate"><span class="pre">get_ex10_module_name()</span></code>
anywhere, so there is no need to pass this structure around.</p>
<p>For additional details, see <a class="reference internal" href="yk_firmware_ex10_host_c_board_initialization.html#ex10-get-ex10-module-methodology"><span class="std std-ref">get_ex10_module methodology</span></a></p>
<p><strong>Previous</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="nc">Ex10Result</span> <span class="n">function_call</span><span class="p">(</span><span class="k">struct</span> <span class="nc">Ex10Interfaces</span> <span class="n">ex10_iface</span><span class="p">)</span>
<span class="p">{</span>
   <span class="n">ex10_iface</span><span class="p">.</span><span class="n">protocol</span><span class="o">-&gt;</span><span class="n">read</span><span class="p">(</span><span class="o">&amp;</span><span class="n">device_info_reg</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dev_info_</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>New</strong></p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="nc">Ex10Result</span> <span class="n">function_call</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">get_ex10_protocol</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">read</span><span class="p">(</span><span class="o">&amp;</span><span class="n">device_info_reg</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dev_info_</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Recommended Action</strong></p>
<ul class="simple">
<li><p>Retrieve module function pointer structures by using get_ex10_module_name()
<code class="docutils literal notranslate"><span class="pre">get_ex10_module_name()</span></code> method.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>include/ex10_api/board_init.h</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ex10_typical_board_setup()</span></code> and <code class="docutils literal notranslate"><span class="pre">ex10_bootloader_board_setup()</span></code>
functions updated to return <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">Ex10Result</span></code> to report on success
or failure.
<code class="docutils literal notranslate"><span class="pre">ex10_get_board_init_status()</span></code> and <code class="docutils literal notranslate"><span class="pre">reset_board_init_error</span></code> are
depricated, as these are no longer needed to check on board setup success
or manage the stored error structure.</p>
<p><strong>Previous</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="nc">Ex10Interfaces</span> <span class="n">ex10_typical_board_setup</span><span class="p">(</span><span class="kt">uint32_t</span>          <span class="n">spi_clock_hz</span><span class="p">,</span>
                                               <span class="k">enum</span> <span class="n">Ex10RegionId</span> <span class="n">region_id</span><span class="p">);</span>

<span class="k">struct</span> <span class="nc">Ex10Protocol</span> <span class="k">const</span><span class="o">*</span> <span class="n">ex10_bootloader_board_setup</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">spi_clock_hz</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>New</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="nc">Ex10Result</span> <span class="n">ex10_typical_board_setup</span><span class="p">(</span><span class="kt">uint32_t</span>          <span class="n">spi_clock_hz</span><span class="p">,</span>
                                           <span class="k">enum</span> <span class="n">Ex10RegionId</span> <span class="n">region_id</span><span class="p">);</span>

<span class="k">struct</span> <span class="nc">Ex10Result</span> <span class="n">ex10_bootloader_board_setup</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">spi_clock_hz</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Recommended Action</strong>:</p>
<ul class="simple">
<li><p>After calling <code class="docutils literal notranslate"><span class="pre">ex10_typical_board_setup()</span></code> or <code class="docutils literal notranslate"><span class="pre">ex10_bootloader_board_setup()</span></code>
check the returned <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">Ex10Result</span></code> to determine success or failure.</p></li>
<li><p>On success, see <a class="reference internal" href="yk_firmware_ex10_host_c_board_initialization.html#ex10-get-ex10-module-methodology"><span class="std std-ref">get_ex10_module methodology</span></a>
how handles to various SDK modules may now be retrieved.</p></li>
<li><p>Remove any calls to <code class="docutils literal notranslate"><span class="pre">ex10_get_board_init_status()</span></code> or <code class="docutils literal notranslate"><span class="pre">reset_board_init_error</span></code>.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>ex10_api/commands.h</p>
<p>ex10_api/ex10_protocol.h</p>
</td>
<td><p>API functions previously returning <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">Ex10CommandsHostErrors</span></code> were
updated to return <a class="reference external" href="ex10_host_c_support/ex10_result.html#_CPPv410Ex10Result">struct Ex10Result</a>.</p>
<p><strong>Recommended Action</strong>:</p>
<ul class="simple">
<li><p>Update return parameter at call site to <a class="reference external" href="ex10_host_c_support/ex10_result.html#_CPPv410Ex10Result">struct Ex10Result</a>.</p></li>
<li><p>Update the check for return value to <a class="reference external" href="ex10_host_c_support/ex10_result.html#_CPPv410Ex10Result">struct Ex10Result</a>
, mainly to check <code class="docutils literal notranslate"><span class="pre">error</span></code> field for pass/fail criteria.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>ex10_api/board_init_status.h</p>
<p>ex10_api/ex10_helpers.h</p>
<p>ex10_api/ex10_ops.h</p>
<p>ex10_api/ex10_power_modes.h</p>
<p>ex10_api/ex10_protocol.h</p>
<p>ex10_api/ex10_reader.h</p>
<p>ex10_api/ex10_utils.h</p>
</td>
<td><p>APIs previously using <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">OpCompletionStatus</span></code> were updated to use
<a class="reference external" href="ex10_host_c_support/ex10_result.html#_CPPv410Ex10Result">struct Ex10Result</a>.
<code class="docutils literal notranslate"><span class="pre">print_commands_host_errors()</span></code> previously implemented in <code class="docutils literal notranslate"><span class="pre">ex10_helpers</span></code> no
longer needed and were removed.</p>
<p><strong>Recommended Action</strong>:</p>
<ul>
<li><p>When using functions previously returning <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">OpCompletionStatus</span></code>, update return parameter at call site to <a class="reference external" href="ex10_host_c_support/ex10_result.html#_CPPv410Ex10Result">struct Ex10Result</a>.</p></li>
<li><p>Update the check for return value to <a class="reference external" href="ex10_host_c_support/ex10_result.html#_CPPv410Ex10Result">struct Ex10Result</a>,
mainly to check <code class="docutils literal notranslate"><span class="pre">error</span></code> field for pass/fail criteria.</p>
<p>For details, see <a class="reference external" href="ex10_host_c_support/ex10_result.html#_CPPv410Ex10Result">struct Ex10Result</a>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">check_ops_status_errors()</span></code>, <code class="docutils literal notranslate"><span class="pre">print_op_completion_status()</span></code> previously implemented in <code class="docutils literal notranslate"><span class="pre">ex10_helpers</span></code> no
longer needed and were removed.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>ex10_api/gen2_tx_command_manager.h</p></td>
<td><p>APIs previously using <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">Gen2TxCommandManagerError</span></code> were updated
to use <a class="reference external" href="ex10_host_c_support/ex10_result.html#_CPPv410Ex10Result">struct Ex10Result</a>
and <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">Gen2TxCommandManagerError</span></code> removed.</p>
<p><strong>Recommended Action</strong>:</p>
<ul>
<li><p>When using functions previously returning <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">Gen2TxCommandManagerError</span></code>, update return parameter at call site to <a class="reference external" href="ex10_host_c_support/ex10_result.html#_CPPv410Ex10Result">struct Ex10Result</a>.</p></li>
<li><p>Update the check for return value to <a class="reference external" href="ex10_host_c_support/ex10_result.html#_CPPv410Ex10Result">struct Ex10Result</a>,
mainly to check <code class="docutils literal notranslate"><span class="pre">error</span></code> field for pass/fail criteria.</p>
<p>For details on usage of <a class="reference external" href="ex10_host_c_support/ex10_result.html#_CPPv410Ex10Result">struct Ex10Result</a>.</p>
</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>aggregate_op_builder.h</p>
<p>command_transactor.h</p>
<p>commands.h, ex10_ops.h</p>
<p>ex10_power_modes.h</p>
<p>ex10_protocol.h</p>
<p>ex10_reader.h</p>
<p>fifo_buffer_list.h</p>
</td>
<td><p>APIs previously not properly returning errors were updated to use
<a class="reference external" href="ex10_host_c_support/ex10_result.html#_CPPv410Ex10Result">struct Ex10Result</a>
or other appropriate type.</p>
<p>Here are a few examples of the changes made:</p>
<p><strong>Previous</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">start_inventory_round</span><span class="p">)(</span><span class="k">struct</span> <span class="nc">InventoryRoundControlFields</span> <span class="k">const</span><span class="o">*</span>   <span class="n">configs</span><span class="p">,</span>
                              <span class="k">struct</span> <span class="nc">InventoryRoundControl_2Fields</span> <span class="k">const</span><span class="o">*</span> <span class="n">configs_2</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>New</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="nc">Ex10Result</span> <span class="p">(</span><span class="o">*</span><span class="n">start_inventory_round</span><span class="p">)(</span><span class="k">struct</span> <span class="nc">InventoryRoundControlFields</span> <span class="k">const</span><span class="o">*</span>   <span class="n">configs</span><span class="p">,</span>
                                           <span class="k">struct</span> <span class="nc">InventoryRoundControl_2Fields</span> <span class="k">const</span><span class="o">*</span> <span class="n">configs_2</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Previous</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">decode_gen2_command</span><span class="p">)(</span><span class="k">struct</span> <span class="nc">Gen2CommandSpec</span><span class="o">*</span> <span class="n">cmd_spec</span><span class="p">,</span>
                            <span class="k">const</span> <span class="k">struct</span> <span class="nc">BitSpan</span><span class="o">*</span>   <span class="n">encoded_command</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>New</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="nc">Ex10Result</span> <span class="p">(</span><span class="o">*</span><span class="n">decode_gen2_command</span><span class="p">)(</span><span class="k">struct</span> <span class="nc">Gen2CommandSpec</span><span class="o">*</span> <span class="n">cmd_spec</span><span class="p">,</span>
                                         <span class="k">const</span> <span class="k">struct</span> <span class="nc">BitSpan</span><span class="o">*</span>   <span class="n">encoded_command</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Previous</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">uint32_t</span> <span class="p">(</span><span class="o">*</span><span class="n">get_levels</span><span class="p">)(</span><span class="k">struct</span> <span class="nc">Ex10GpioConfig</span> <span class="k">const</span><span class="o">*</span> <span class="n">gpio_config</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>New</strong>:</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">uint32_t</span></code> value previously returned by this function is now returned via
<code class="docutils literal notranslate"><span class="pre">gpio_levels</span></code> parameter, to allow the function’s return value to be <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">Ex10Result</span></code>.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="nc">Ex10Result</span> <span class="p">(</span><span class="o">*</span><span class="n">get_levels</span><span class="p">)(</span><span class="k">struct</span> <span class="nc">Ex10GpioConfig</span> <span class="k">const</span><span class="o">*</span> <span class="n">gpio_config</span><span class="p">,</span>
                                <span class="kt">uint32_t</span><span class="o">*</span>                    <span class="n">gpio_levels</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Previous</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">size_t</span> <span class="p">(</span><span class="o">*</span><span class="n">discard_packets</span><span class="p">)(</span><span class="kt">bool</span> <span class="n">print_packets</span><span class="p">,</span>
                          <span class="kt">bool</span> <span class="n">flush_packets</span><span class="p">,</span>
                          <span class="kt">bool</span> <span class="n">debug_aggregate_op</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>New</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">ssize_t</span> <span class="p">(</span><span class="o">*</span><span class="n">discard_packets</span><span class="p">)(</span><span class="kt">bool</span> <span class="n">print_packets</span><span class="p">,</span>
                     <span class="kt">bool</span> <span class="n">flush_packets</span><span class="p">,</span>
                     <span class="kt">bool</span> <span class="n">debug_aggregate_op</span><span class="p">);;</span>
</pre></div>
</div>
<p><strong>Recommended Action</strong>:</p>
<ul class="simple">
<li><p>At call site, check the updated return value for pass/fail criteria.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>board/r807_ref_design/calibration.h</p></td>
<td><p>Remove reading calibration version from Impinj reader chip during
<code class="docutils literal notranslate"><span class="pre">get_ex10_calibration()</span></code>.</p>
<p>Remove <code class="docutils literal notranslate"><span class="pre">ex10_protocol</span></code> argument from <code class="docutils literal notranslate"><span class="pre">get_ex10_calibration()</span></code> that
is no longer needed.  This allows <code class="docutils literal notranslate"><span class="pre">get_ex10_calibration()</span></code>
to be called at any time to lookup the ex10_calibration function pointers.</p>
<p><strong>Previous</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="nc">Ex10Calibration</span> <span class="k">const</span><span class="o">*</span> <span class="n">get_ex10_calibration</span><span class="p">(</span><span class="k">struct</span> <span class="nc">Ex10Protocol</span> <span class="k">const</span><span class="o">*</span> <span class="n">ex10_protocol</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>New</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="nc">Ex10Calibration</span> <span class="k">const</span><span class="o">*</span> <span class="n">get_ex10_calibration</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Recommended Action</strong>:</p>
<ul class="simple">
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">ex10_protocol</span></code> argument from get_ex10_calibration() call.</p></li>
<li><p>Always call Init() before interacting with the calibration module.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>ex10_api/ex10_macros.h</p></td>
<td><p>Add <code class="docutils literal notranslate"><span class="pre">ARRAY_SIZE(x)</span></code> macro in the new header file <code class="docutils literal notranslate"><span class="pre">ex10_api/ex10_macros.h</span></code>.</p>
<p><strong>Previous</strong>:</p>
<p>Previously <code class="docutils literal notranslate"><span class="pre">ARRAY_SIZE(x)</span></code> was defined locally within individual files.</p>
<p><strong>New</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="c1">// The C-language macro for implementing std::size().</span>
<span class="cp">#define ARRAY_SIZE(x) (sizeof(x) / sizeof((x)[0]))</span>
</pre></div>
</div>
<p><strong>Recommended Action</strong>:</p>
<ul class="simple">
<li><p>Include the header file <code class="docutils literal notranslate"><span class="pre">ex10_api/ex10_macros.h</span></code> to include the
<code class="docutils literal notranslate"><span class="pre">ARRAY_SIZE(x)</span></code> macro definition.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>ex10_api/ex10_protocol.h</p></td>
<td><p>Rename the symbol <code class="docutils literal notranslate"><span class="pre">MAX_IMAGE_BYTES</span></code> to <code class="docutils literal notranslate"><span class="pre">EX10_MAX_IMAGE_BYTES</span></code>.</p>
<p>Add <code class="docutils literal notranslate"><span class="pre">EX10_INFO_PAGE_SIZE</span></code> macro symbol in the header file <code class="docutils literal notranslate"><span class="pre">ex10_api/ex10_protocol.h</span></code>.</p>
<p><strong>Previous</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="c1">/// The maximum size of the application image in bytes.</span>
<span class="cp">#define MAX_IMAGE_BYTES (254000)</span>
</pre></div>
</div>
<p><strong>New</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="c1">/// The maximum size of the application image in bytes.</span>
<span class="cp">#define EX10_MAX_IMAGE_BYTES ((size_t)(254000u))</span>

<span class="c1">/// The size of a FLASH INFO PAGE on the Impinj Reader Chip.</span>
<span class="c1">/// Independent Flash Info pages are dedicated to holding calibration data</span>
<span class="c1">/// and stored settings data. @see enum PageIds</span>
<span class="cp">#define EX10_INFO_PAGE_SIZE ((size_t)(2048u))</span>
</pre></div>
</div>
<p><strong>Recommended Action</strong>:</p>
<ul class="simple">
<li><p>The SDK has been updated to use the renamed symbol <code class="docutils literal notranslate"><span class="pre">EX10_MAX_IMAGE_BYTES</span></code>
instead of the symbol <code class="docutils literal notranslate"><span class="pre">MAX_IMAGE_BYTES</span></code>.</p></li>
<li><p>The SDK has been updated to use the globally defined <code class="docutils literal notranslate"><span class="pre">EX10_INFO_PAGE_SIZE</span></code>
instead of locally defining a value.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>board/gpio_driver.h</p>
<p>include/ex10_api/gpio_interface.h</p>
<p>include/ex10_api/ex10_protocol.h</p>
</td>
<td><p>Add interface functions to the <code class="docutils literal notranslate"><span class="pre">Ex10GpioDriver</span></code> and <code class="docutils literal notranslate"><span class="pre">Ex10GpioInterface</span></code> to
enable/disable the IRQ_N monitor thread from calling the registered interrupt handler.</p>
<p><strong>Previous</strong>:</p>
<p>Previously, the registered IRQ_N interrupt handler ignored interrupts when the
Impinj Reader Chip was powered down with the following code segment in the
file <code class="docutils literal notranslate"><span class="pre">ex10_protocol.c</span></code>, function <code class="docutils literal notranslate"><span class="pre">interrupt_handler()</span></code>.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="c1">// Do not attempt to process interrupts when the Impinj Reader Chip is</span>
<span class="c1">// powered off. When the Ex10 is transitioned to PowerModeOff, the IRQ_N</span>
<span class="c1">// line will fall triggering an interrupt. Do not process this interrupt.</span>
<span class="n">_gpio_if</span><span class="o">-&gt;</span><span class="n">irq_enable</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span>
<span class="kt">bool</span> <span class="k">const</span> <span class="n">ex10_is_powered</span> <span class="o">=</span> <span class="n">_gpio_if</span><span class="o">-&gt;</span><span class="n">get_board_power</span><span class="p">();</span>
<span class="n">_gpio_if</span><span class="o">-&gt;</span><span class="n">irq_enable</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="n">ex10_is_powered</span> <span class="o">==</span> <span class="nb">false</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This code has been removed in this release. It presented a race condition when:</p>
<blockquote>
<div><ul class="simple">
<li><p>The interrupt handler thread is of the same priority as the client reader thread.</p></li>
<li><p>The PowerModes layer would remove power after the check was completed.</p></li>
</ul>
</div></blockquote>
<p><strong>New</strong>:</p>
<p>gpio_driver.h, gpio_interface.h:</p>
<p>The interface function <code class="docutils literal notranslate"><span class="pre">Ex10GpioInterface.irq_monitor_callback_enable()</span></code> is used
to disable interrupt handler callbacks when power removed from the Impinj Reader Chip.
When power is applied, the interrupts are enabled by this same function.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm">  * Enable or disable the IRQ_N monitor thread to call the registered</span>
<span class="cm">  * callback function.</span>
<span class="cm">  *</span>
<span class="cm">  * @param enable If set to true then the registered callback function will</span>
<span class="cm">  *               be called, within the IRQ_N monitor thread context,</span>
<span class="cm">  *               when an IRQ_N falling edge occurs.</span>
<span class="cm">  */</span>
<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">irq_monitor_callback_enable</span><span class="p">)(</span><span class="kt">bool</span> <span class="n">enable</span><span class="p">);</span>
<span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">irq_monitor_callback_is_enabled</span><span class="p">)(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
<p>ex10_protocol.h:</p>
<p>The interface function <code class="docutils literal notranslate"><span class="pre">Ex10Protocol.enable_interrupt_handlers(bool)</span></code> has been added
as a pass-through to the <code class="docutils literal notranslate"><span class="pre">Ex10GpioInterface.irq_monitor_callback_enable(bool)</span></code> module.
This is the actual function used by the <code class="docutils literal notranslate"><span class="pre">Ex10PowerModes</span></code> layer to enable and disable
interrupt handler callbacks.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * Enable or disable Impinj Reader Chip interrupt processing.</span>
<span class="cm"> *</span>
<span class="cm"> * @attention Do not call this function from the IRQ_N monitor thread</span>
<span class="cm"> *            context. A deadlock will occur.</span>
<span class="cm"> *</span>
<span class="cm"> * @param enable If true, the interrupt and fifo data handlers</span>
<span class="cm"> *               will be called when the Impinj Reader Chip triggers the</span>
<span class="cm"> *               IRQ_N monitor thread. If false, then all interrupts are</span>
<span class="cm"> *               ignored from the IRQ_N monitor thread.</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">enable_interrupt_handlers</span><span class="p">)(</span><span class="kt">bool</span> <span class="n">enable</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>board/gpio_driver.h</p>
<p>include/ex10_api/gpio_interface.h</p>
</td>
<td><p>GPIO interface and accordingly the GPIO driver functions were updated
to return <code class="docutils literal notranslate"><span class="pre">int32_t</span></code> value to indicate success or failure.</p>
<p>Here are a few examples of this update:</p>
<p><strong>Previous</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">initialize</span><span class="p">)(</span><span class="kt">bool</span> <span class="n">board_power_on</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">ex10_enable</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">reset</span><span class="p">);</span>
<span class="p">...</span>
<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">busy_wait_ready_n</span><span class="p">)(</span><span class="kt">uint32_t</span> <span class="n">ready_n_timeout_ms</span><span class="p">);</span>
<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">ready_n_pin_get</span><span class="p">)(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>New</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span> <span class="p">(</span><span class="o">*</span><span class="n">initialize</span><span class="p">)(</span><span class="kt">bool</span> <span class="n">board_power_on</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">ex10_enable</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">reset</span><span class="p">);</span>
<span class="p">...</span>
<span class="kt">int32_t</span> <span class="p">(</span><span class="o">*</span><span class="n">busy_wait_ready_n</span><span class="p">)(</span><span class="kt">uint32_t</span> <span class="n">ready_n_timeout_ms</span><span class="p">);</span>
<span class="kt">int32_t</span> <span class="p">(</span><span class="o">*</span><span class="n">ready_n_pin_get</span><span class="p">)(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Recommended Action</strong>:</p>
<ul class="simple">
<li><p>Update GPIO driver implementation to return zero for success, non-zero for failure.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>ex10_api/ex10_protocol.h</p></td>
<td><p>The Ex10Protocol.reset() command return value includes the value
<code class="docutils literal notranslate"><span class="pre">2</span></code> to indicate that the reset to Bootloader failed and that the Impinj Reader Chip
is executing in the Application context.</p>
<p><strong>Previous</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * Issue a soft reset to the Ex10 chip.</span>
<span class="cm"> ...</span>
<span class="cm"> *</span>
<span class="cm"> * @return int  A integer error code indicating success or failure.</span>
<span class="cm"> * @retval = 0  The reset to the requested destination was successful.</span>
<span class="cm"> * @retval = 1  The Impinj Reader Chip reset to the Bootloader when the</span>
<span class="cm"> *              Application was requested.</span>
<span class="cm"> * @retval &lt; 0  An operating system error code: The negative POSIX errno</span>
<span class="cm"> *              value.</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">reset</span><span class="p">)(</span><span class="k">enum</span> <span class="n">Status</span> <span class="n">destination</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>New</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * Issue a soft reset to the Ex10 chip.</span>
<span class="cm"> ...</span>
<span class="cm"> *</span>
<span class="cm"> * @return int  A integer error code indicating success or failure.</span>
<span class="cm"> * @retval = 0  The reset to the requested destination was successful.</span>
<span class="cm"> * @retval = 1  The Impinj Reader Chip reset to the Bootloader when the</span>
<span class="cm"> *              Application was requested. The most likely reason for this</span>
<span class="cm"> *              situation is an invalid Application Image.</span>
<span class="cm"> * @retval = 2  The Impinj Reader Chip reset to the Application when the</span>
<span class="cm"> *              Bootloader was requested. This is an unexpected condition,</span>
<span class="cm"> *              and might indicate a Firmware reset command error.</span>
<span class="cm"> * @retval &lt; 0  An operating system error code: The negative POSIX errno</span>
<span class="cm"> *              value.</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">reset</span><span class="p">)(</span><span class="k">enum</span> <span class="n">Status</span> <span class="n">destination</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Recommended Action</strong>:</p>
<ul class="simple">
<li><p>When the actual reset destination does not match the requested reset
destination, the Impinj Reader Chip should not proceed in its current
operational state.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>ex10_c_dev_kit/examples/ex10_fct_wrapper.c</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">previous_interface()</span></code> The <code class="docutils literal notranslate"><span class="pre">y</span></code> command took one parameter, just to enable or disable PGA3 routing:</p>
<p><strong>Previous</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">y</span> <span class="mi">1</span>
<span class="n">y</span> <span class="mi">0</span>
</pre></div>
</div>
<p><strong>New</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">y</span> <span class="mo">0010</span> <span class="mo">0010</span> <span class="mo">0010</span> <span class="mo">0010</span>
<span class="n">y</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>
</pre></div>
</div>
<p><strong>Recommended Action</strong>:</p>
<ul class="simple">
<li><p>Pass in 4 mux parameters instead of just ‘1’ or ‘0’.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>ex10_api/ex10_reader.h</p></td>
<td><p>The reader init no longer needs the ops layer reference passed in.</p>
<p><strong>Previous</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">init</span><span class="p">)(</span><span class="k">struct</span> <span class="nc">Ex10Ops</span> <span class="k">const</span><span class="o">*</span> <span class="n">ex10_ops</span><span class="p">,</span> <span class="k">enum</span> <span class="n">Ex10RegionId</span> <span class="n">region_id</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>New</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">init</span><span class="p">)(</span><span class="k">enum</span> <span class="n">Ex10RegionId</span> <span class="n">region_id</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Recommended Action</strong>:</p>
<ul class="simple">
<li><p>Remove the passed in ops layer.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>ex10_api/ex10_ops.h</p></td>
<td><p>The ops init no longer needs the protocol layer reference passed in.</p>
<p><strong>Previous</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">init</span><span class="p">)(</span><span class="k">struct</span> <span class="nc">Ex10Protocol</span> <span class="k">const</span><span class="o">*</span> <span class="n">ex10_protocol</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>New</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">init</span><span class="p">)();</span>
</pre></div>
</div>
<p><strong>Recommended Action</strong>:</p>
<ul class="simple">
<li><p>Remove the passed in protocol layer.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>ex10_api/ex10_ops.h</p></td>
<td><p>The ops <code class="docutils literal notranslate"><span class="pre">measure_aux_adc()</span></code> function was updated to only start
<a class="reference internal" href="yk_firmware_ex10_api_operations.html#measureadcop"><span class="std std-ref">MeasureAdcOp</span></a>, without waiting Op completion nor
reading the resulting ADC.</p>
<p><strong>Previous</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="nc">Ex10Result</span> <span class="p">(</span><span class="o">*</span><span class="n">measure_aux_adc</span><span class="p">)(</span><span class="k">enum</span> <span class="n">AuxAdcResultsAdcResult</span> <span class="n">adc_channel_start</span><span class="p">,</span>
                                     <span class="kt">uint8_t</span>                     <span class="n">num_channels</span><span class="p">,</span>
                                     <span class="kt">uint16_t</span><span class="o">*</span>                   <span class="n">adc_results</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>New</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">measure_aux_adc</span><span class="p">)(</span><span class="k">enum</span> <span class="n">AuxAdcResultsAdcResult</span> <span class="n">adc_channel_start</span><span class="p">,</span>
                        <span class="kt">uint8_t</span>                     <span class="n">num_channels</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Recommended Action</strong>:</p>
<ul class="simple">
<li><p>Call <code class="docutils literal notranslate"><span class="pre">Ex10RfPower</span></code>’s <code class="docutils literal notranslate"><span class="pre">measure_and_read_aux_adc()</span></code> function to run
<a class="reference internal" href="yk_firmware_ex10_api_operations.html#measureadcop"><span class="std std-ref">MeasureAdcOp</span></a> and read back the resulting ADC.</p></li>
<li><p>Call <code class="docutils literal notranslate"><span class="pre">Ex10RfPower</span></code>’s <code class="docutils literal notranslate"><span class="pre">measure_and_read_adc_temperature()</span></code> function
to run <a class="reference internal" href="yk_firmware_ex10_api_operations.html#measureadcop"><span class="std std-ref">MeasureAdcOp</span></a> and read back the resulting
ADC temperature.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>ex10_api/ex10_ops.h</p></td>
<td><p>The listed <code class="docutils literal notranslate"><span class="pre">Ex10Ops</span></code>’s functions were just a pass-thru to similar <code class="docutils literal notranslate"><span class="pre">Ex10Protocol</span></code>’s
and we removed.</p>
<p><strong>Previous</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">write_calibration_page</span><span class="p">)(</span><span class="kt">uint8_t</span> <span class="k">const</span><span class="o">*</span> <span class="n">data_ptr</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">write_length</span><span class="p">);</span>

<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">register_fifo_data_callback</span><span class="p">)(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">fifo_cb</span><span class="p">)(</span><span class="k">struct</span> <span class="nc">FifoBufferNode</span><span class="o">*</span><span class="p">));</span>

<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">register_interrupt_callback</span><span class="p">)(</span><span class="k">struct</span> <span class="nc">InterruptMaskFields</span> <span class="n">enable_mask</span><span class="p">,</span>
                                    <span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">interrupt_cb</span><span class="p">)(</span><span class="k">struct</span> <span class="nc">InterruptStatusFields</span><span class="p">));</span>

<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">unregister_fifo_data_callback</span><span class="p">)(</span><span class="kt">void</span><span class="p">);</span>

<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">unregister_interrupt_callback</span><span class="p">)(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Recommended Action</strong>:</p>
<ul class="simple">
<li><p>Call <code class="docutils literal notranslate"><span class="pre">Ex10Protocol</span></code>’s equivalent function with same input parameters.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>ex10_api/ex10_reader.h</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">write_cal_info_page()</span></code> function was removed from <code class="docutils literal notranslate"><span class="pre">Ex10Reader</span></code>,
as it was just a pass-thru to <code class="docutils literal notranslate"><span class="pre">write_calibration_page()</span></code> in <code class="docutils literal notranslate"><span class="pre">Ex10Protocol</span></code>.</p>
<p><strong>Previous</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">write_cal_info_page</span><span class="p">)(</span><span class="kt">uint8_t</span> <span class="k">const</span><span class="o">*</span> <span class="n">data_ptr</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">write_length</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Recommended Action</strong>:</p>
<ul class="simple">
<li><p>Call <code class="docutils literal notranslate"><span class="pre">Ex10Protocol</span></code>’s <code class="docutils literal notranslate"><span class="pre">write_calibration_page()</span></code> function with
same input parameters.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>board/e710_ref_design/fifo_buffer_pool.c</p></td>
<td><p>An pool of buffers was added to be used for reporting errors that
occurred in interrupt context.</p>
<p>See <a class="reference internal" href="ex10_host_c_support/ex10_result.html#ex10-api-host-c-api-ex10-result-interrupt-context"><span class="std std-ref">Interrupt Context Errors</span></a>
fo additional details.</p>
<p><strong>New</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">static</span> <span class="kt">uint32_t</span> <span class="n">result_buffer_0</span><span class="p">[</span><span class="n">RESULT_FIFO_BUFFER_SIZE_BYTES</span> <span class="o">/</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">)];</span>
<span class="k">static</span> <span class="kt">uint32_t</span> <span class="n">result_buffer_1</span><span class="p">[</span><span class="n">RESULT_FIFO_BUFFER_SIZE_BYTES</span> <span class="o">/</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">)];</span>
<span class="k">static</span> <span class="kt">uint32_t</span> <span class="n">result_buffer_2</span><span class="p">[</span><span class="n">RESULT_FIFO_BUFFER_SIZE_BYTES</span> <span class="o">/</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">)];</span>
<span class="k">static</span> <span class="kt">uint32_t</span> <span class="n">result_buffer_3</span><span class="p">[</span><span class="n">RESULT_FIFO_BUFFER_SIZE_BYTES</span> <span class="o">/</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">)];</span>

<span class="k">static</span> <span class="k">struct</span> <span class="nc">ByteSpan</span> <span class="k">const</span> <span class="n">result_buffers</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">{.</span><span class="n">data</span> <span class="o">=</span> <span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span><span class="n">result_buffer_0</span><span class="p">,</span> <span class="p">.</span><span class="n">length</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">result_buffer_0</span><span class="p">)},</span>
  <span class="p">{.</span><span class="n">data</span> <span class="o">=</span> <span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span><span class="n">result_buffer_1</span><span class="p">,</span> <span class="p">.</span><span class="n">length</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">result_buffer_1</span><span class="p">)},</span>
  <span class="p">{.</span><span class="n">data</span> <span class="o">=</span> <span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span><span class="n">result_buffer_2</span><span class="p">,</span> <span class="p">.</span><span class="n">length</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">result_buffer_2</span><span class="p">)},</span>
  <span class="p">{.</span><span class="n">data</span> <span class="o">=</span> <span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span><span class="n">result_buffer_3</span><span class="p">,</span> <span class="p">.</span><span class="n">length</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">result_buffer_3</span><span class="p">)},</span>
<span class="p">};</span>
</pre></div>
</div>
<p><strong>Recommended Action</strong>:</p>
<ul class="simple">
<li><p>To support error reporting from interrupt context, allocate the pool
of buffers, as shown in <cite>board/e710_ref_design/fifo_buffer_pool.c</cite>.
When this pool becomes empty and an error occurred that
requires a free “result” buffer for reporting, the error will be
silently discarded.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>board/ex10_osal.h, board/ex10_osal_posix.h, board/e710_ref_design/ex10_osal_posix.c</p>
<p>board/ex10_random.h, board/e710_ref_design/ex10_random.c</p>
<p>board/e710_ref_design/ex10_print.c</p>
</td>
<td><p>New board-specific files were added to remove platform-specific
implementations from the <code class="docutils literal notranslate"><span class="pre">src</span></code> folder and improve SDK portability.</p>
<p><strong>Recommended Action</strong>:</p>
<ul class="simple">
<li><p>Fill platform-specific implementations for these APIs. For reference,
refer to <code class="docutils literal notranslate"><span class="pre">board/e710_ref_design</span></code> implementation.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>include/ex10_api/application_registers.h</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">RfSynthesizerControl</span></code> register (<code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">struct</span> <span class="pre">RegisterInfo</span> <span class="pre">const</span> <span class="pre">rf_synthesizer_control_reg</span></code>)
moved to address <code class="docutils literal notranslate"><span class="pre">0x0588</span></code> and its number entries was increased to 5.</p>
<p>The first entry of the register is used by <a class="reference internal" href="yk_firmware_ex10_api_operations.html#locksynthesizerop"><span class="std std-ref">LockSynthesizerOp</span></a>,
as before.</p>
<p>Newly added entries are to be used by <a class="reference internal" href="yk_firmware_ex10_api_operations.html#listenbeforetalkop"><span class="std std-ref">ListenBeforeTalkOp</span></a>.</p>
<p><strong>Recommended Action</strong>:</p>
<ul>
<li><p>For <a class="reference internal" href="yk_firmware_ex10_api_operations.html#locksynthesizerop"><span class="std std-ref">LockSynthesizerOp</span></a>, update first entry
only of this register at the new address. Same parameters may be used.</p>
<p>See <a class="reference internal" href="yk_firmware_ex10_api_operations.html#listenbeforetalkop"><span class="std std-ref">ListenBeforeTalkOp</span></a> on further details
on how the new entries of this register are used by that Op.</p>
</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>include/ex10_api/application_registers.h</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">RxGainControl</span></code> register (<code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">struct</span> <span class="pre">RegisterInfo</span> <span class="pre">const</span> <span class="pre">rx_gain_control_reg</span></code>)
length reduced to 2 to free up unused memory.</p>
<p><strong>Recommended Action</strong>:</p>
<ul class="simple">
<li><p>Meaningful fields and their location have not changed, only bits 0:15
from previously used register value may be written to the register
address.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>include/ex10_api/application_registers.h</p></td>
<td><p>LBT-related registers updated, as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LbtOffset</span></code> register (<code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">struct</span> <span class="pre">RegisterInfo</span> <span class="pre">const</span> <span class="pre">lbt_offset_reg</span></code>)
moved to address <code class="docutils literal notranslate"><span class="pre">0x560</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LbtControl</span></code> register (<code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">struct</span> <span class="pre">RegisterInfo</span> <span class="pre">const</span> <span class="pre">lbt_control_reg</span></code>)
moved to address <code class="docutils literal notranslate"><span class="pre">0x574</span></code> and its length was increased to 4.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MeasureRssiCount</span></code> register (<code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">struct</span> <span class="pre">RegisterInfo</span> <span class="pre">const</span> <span class="pre">measure_rssi_count_reg</span></code>)
moved to address <code class="docutils literal notranslate"><span class="pre">0x554</span></code> and its number of entries was increased to 5.</p></li>
</ul>
<p><strong>Recommended Action</strong>:</p>
<ul class="simple">
<li><p>See <a class="reference internal" href="yk_firmware_ex10_api_operations.html#listenbeforetalkop"><span class="std std-ref">ListenBeforeTalkOp</span></a> for updated Op description.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>include/ex10_api/application_registers.h</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DropQueryControl</span></code> register (<code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">struct</span> <span class="pre">RegisterInfo</span> <span class="pre">const</span> <span class="pre">drop_query_control_reg</span></code>)
length reduced to 2 to free up unused memory.</p>
<p><strong>Recommended Action</strong>:</p>
<ul class="simple">
<li><p>Meaningful fields and their location have not changed, only bits 0:15
from previously used register value may be written to the register
address.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>include/ex10_api/application_registers.h</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ex10_dump_all_registers()</span></code> function no longer requires <code class="docutils literal notranslate"><span class="pre">FILE*</span></code>
input parameter. This function prints using the newly added
<code class="docutils literal notranslate"><span class="pre">ex10_printf()</span></code> function.</p>
<p><strong>Previous</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">ex10_dump_all_registers</span><span class="p">(</span><span class="kt">FILE</span><span class="o">*</span> <span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>New</strong>:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">ex10_dump_all_registers</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Recommended Action</strong>:</p>
<ul class="simple">
<li><p>Remove previously passed <code class="docutils literal notranslate"><span class="pre">FILE*</span></code> input parameter.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>board/ex10_rx_baseband_filter.h</p>
<p>include/ex10_api/ex10_rf_power.h</p>
</td>
<td><p>Dense Reader Mode (DRM) status selection and RX baseband filter selection is taken out
of the SDK ex10_rf_power.h module and moved into a new board layer module, ex10_rx_baseband_filter.h</p>
<p><strong>Previous</strong>:</p>
<p>Previously, the DRM status was chosen in the ex10_rf_power layer and was only chosen
based on the current RF mode (if the RF mode supports DRM, DRM is on; otherwise, off).
The RX baseband filter selection based on the DRM status was also done in the ex10_rf_power
layer function <code class="docutils literal notranslate"><span class="pre">build_cw_configs()</span></code>. However, DRM support and filter type selection may
vary depending on the board.</p>
<p>ex10_rf_power.h:</p>
<p>The following function <code class="docutils literal notranslate"><span class="pre">rf_mode_is_drm()</span></code> is removed.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">static</span> <span class="kt">bool</span> <span class="nf">rf_mode_is_drm</span><span class="p">(</span><span class="k">enum</span> <span class="n">RfModes</span> <span class="n">rf_mode</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Define baseband filter to use depending on rf_mode</span>
    <span class="c1">// 241 and 244 are duplicates of modes 5 and 7</span>
    <span class="kt">uint16_t</span> <span class="k">const</span> <span class="n">drm_modes</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">141</span><span class="p">,</span> <span class="mi">146</span><span class="p">,</span> <span class="mi">186</span><span class="p">,</span> <span class="mi">241</span><span class="p">,</span> <span class="mi">244</span><span class="p">,</span> <span class="mi">286</span><span class="p">,</span> <span class="mi">342</span><span class="p">,</span> <span class="mi">343</span><span class="p">,</span> <span class="mi">383</span><span class="p">};</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">uint8_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">drm_modes</span><span class="p">)</span> <span class="o">/</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">drm_modes</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">rf_mode</span> <span class="o">==</span> <span class="n">drm_modes</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Functions <code class="docutils literal notranslate"><span class="pre">build_cw_configs()</span></code> and <code class="docutils literal notranslate"><span class="pre">set_rf_mode()</span></code> are modified.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span> <span class="k">const</span>                    <span class="n">use_drm_filter</span> <span class="o">=</span> <span class="n">rf_mode_is_drm</span><span class="p">(</span><span class="n">rf_mode</span><span class="p">);</span>
<span class="k">enum</span> <span class="n">BasebandFilterType</span> <span class="k">const</span> <span class="n">rx_baseband_filter</span> <span class="o">=</span>
    <span class="n">use_drm_filter</span> <span class="o">?</span> <span class="nl">BasebandFilterBandpass</span> <span class="p">:</span> <span class="n">BasebandFilterHighpass</span><span class="p">;</span>

<span class="n">get_ex10_board_spec</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">get_gpio_output_pins_set_clear</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">cw_config</span><span class="o">-&gt;</span><span class="n">gpio</span><span class="p">,</span>
    <span class="n">antenna</span><span class="p">,</span>
    <span class="n">tx_power_cdbm</span><span class="p">,</span>
    <span class="n">rx_baseband_filter</span><span class="p">,</span>
    <span class="n">region</span><span class="o">-&gt;</span><span class="n">get_rf_filter</span><span class="p">());</span>
</pre></div>
</div>
<p><strong>New</strong>:</p>
<p>Any file that calls <code class="docutils literal notranslate"><span class="pre">get_ex10_rf_power()-&gt;rf_mode_is_drm()</span></code> should now import the new module
and call <code class="docutils literal notranslate"><span class="pre">get_ex10_rx_baseband_filter()-&gt;choose_rx_baseband_filter()</span></code> or
<code class="docutils literal notranslate"><span class="pre">get_ex10_rx_baseband_filter()-&gt;rf_mode_is_drm()</span></code> instead.</p>
<p>In addtional, the caller now has an option to change the DRM status: DRM status selection
based on the RF mode (DrmStatusAuto), DRM always on (DrmStatusOn), or DRM always off (DrmStatusOff).
The default DRM status option is DrmStatusAuto. This can be changed by calling
<code class="docutils literal notranslate"><span class="pre">set_drm_status()</span></code>.</p>
<p>ex10_rf_power.h:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">const</span> <span class="k">enum</span> <span class="n">BasebandFilterType</span> <span class="n">rx_baseband_filter</span> <span class="o">=</span>
    <span class="n">get_ex10_rx_baseband_filter</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">choose_rx_baseband_filter</span><span class="p">(</span><span class="n">rf_mode</span><span class="p">);</span>

<span class="n">get_ex10_board_spec</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">get_gpio_output_pins_set_clear</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">cw_config</span><span class="o">-&gt;</span><span class="n">gpio</span><span class="p">,</span>
    <span class="n">antenna</span><span class="p">,</span>
    <span class="n">tx_power_cdbm</span><span class="p">,</span>
    <span class="n">rx_baseband_filter</span><span class="p">,</span>
    <span class="n">region</span><span class="o">-&gt;</span><span class="n">get_rf_filter</span><span class="p">());</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="index.html">Impinj Reader Chip SDK</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Changelog for 2.00.00</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, Impinj, Inc..
    </div>
  </body>
</html>